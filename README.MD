# ğŸ³ Marmiton-Exam - Application de Gestion de Recettes

**Version:** `1.0.0` - Phase: **Test Utilisateur** ğŸ§ª

---

## ğŸ“‹ Ã€ propos du projet

**Marmiton-Exam** est une application web PHP permettant aux utilisateurs de :

- ğŸ‘¤ **S'authentifier** et gÃ©rer leur compte utilisateur
- ğŸ“ **CrÃ©er, modifier et supprimer** ses propres recettes
- ğŸ–¼ï¸ **Uploader des images** pour illustrer les recettes
- â¤ï¸ **Sauvegarder des favoris** depuis l'API TheMealDB
- ğŸ‘ï¸ **Consulter les dÃ©tails** des recettes (locales et API)
- ğŸ” **Rechercher** des recettes d'inspiration via l'API TheMealDB
- ğŸ¨ **Changer de thÃ¨me** (clair/sombre)

---

## ğŸ¯ Objectifs de la Version 1.0

### âœ… FonctionnalitÃ©s ImplÃ©mentÃ©es

#### Authentification & Utilisateurs
- âœ… Inscription avec validation email
- âœ… Connexion avec hashing sÃ©curisÃ© (password_hash)
- âœ… DÃ©connexion
- âœ… Rate limiting sur les tentatives de connexion
- âœ… Protection CSRF sur tous les formulaires

#### Gestion des Recettes Locales
- âœ… CrÃ©er une recette (titre, description, ingrÃ©dients, instructions, image)
- âœ… Lire/Consulter une recette
- âœ… Modifier une recette (propriÃ©taire uniquement)
- âœ… Supprimer une recette (propriÃ©taire uniquement)
- âœ… Upload d'images (validation MIME + taille)
- âœ… Gestion dynamique des ingrÃ©dients (JSON)
- âœ… Affichage responsive (desktop/mobile)

#### Favoris (API TheMealDB)
- âœ… Ajouter une recette API aux favoris
- âœ… Retirer un favori (AJAX)
- âœ… Consulter la liste des favoris
- âœ… **[NOUVEAU v1.0]** Afficher les dÃ©tails d'une recette API dans l'app (au lieu de redirection externe)
- âœ… Cache en session (30 minutes)
- âœ… Gestion gracieuse des erreurs API

#### Interface de Recherche
- âœ… Recherche de recettes via TheMealDB
- âœ… Affichage dynamique (JavaScript)
- âœ… Ajout direct aux favoris depuis les rÃ©sultats
- âœ… Section "IdÃ©es du jour" (recettes alÃ©atoires)
- âœ… **[NOUVEAU v1.0]** Max 6 recettes alÃ©atoires sur l'accueil

#### Design & UX
- âœ… Design responsive (Bootstrap 5)
- âœ… Navigation fluide
- âœ… Feedback utilisateur (toasts notifications)
- âœ… ThÃ¨me sombre/clair (localStorage)
- âœ… Animations et transitions
- âœ… IcÃ´nes intÃ©grÃ©es
- âœ… Menu burger pour mobile

---

## ğŸ—ï¸ Architecture du Projet

### Structure des Dossiers

```
examenPHP/
â”œâ”€â”€ public/                          # Point d'entrÃ©e + assets
â”‚   â”œâ”€â”€ index.php                   # Front controller
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”œâ”€â”€ style.css              # Styles personnalisÃ©s
â”‚   â”‚   â””â”€â”€ bootstrap.min.css       # Bootstrap
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ main.js                # Point d'entrÃ©e JS
â”‚   â”‚   â”œâ”€â”€ modules/               # Modules rÃ©utilisables
â”‚   â”‚   â”‚   â”œâ”€â”€ FavoriteToggler.js
â”‚   â”‚   â”‚   â”œâ”€â”€ FormValidator.js
â”‚   â”‚   â”‚   â”œâ”€â”€ IngredientManager.js
â”‚   â”‚   â”‚   â””â”€â”€ PasswordToggler.js
â”‚   â”‚   â””â”€â”€ classes/
â”‚   â”‚       â””â”€â”€ ThemeToggle.js
â”‚   â””â”€â”€ uploads/                   # Images uploadÃ©es

â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ controllers/               # Logique mÃ©tier
â”‚   â”‚   â”œâ”€â”€ MainController.php
â”‚   â”‚   â”œâ”€â”€ RecipesController.php
â”‚   â”‚   â”œâ”€â”€ FavoritesController.php
â”‚   â”‚   â”œâ”€â”€ ApiController.php
â”‚   â”‚   â”œâ”€â”€ UsersController.php
â”‚   â”‚   â””â”€â”€ ContactController.php
â”‚   â”œâ”€â”€ models/                    # AccÃ¨s aux donnÃ©es
â”‚   â”‚   â”œâ”€â”€ RecipesModel.php
â”‚   â”‚   â”œâ”€â”€ FavoritesModel.php
â”‚   â”‚   â””â”€â”€ UsersModel.php
â”‚   â””â”€â”€ core/                      # Framework MVC
â”‚       â”œâ”€â”€ Main.php              # Routeur
â”‚       â”œâ”€â”€ Controller.php        # Classe de base
â”‚       â”œâ”€â”€ Model.php            # Classe de base
â”‚       â””â”€â”€ Db.php               # Connexion PDO

â”œâ”€â”€ views/                         # Templates HTML
â”‚   â”œâ”€â”€ base.php                  # Layout principal
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ header.php
â”‚   â”‚   â””â”€â”€ footer.php
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â””â”€â”€ index.php            # Accueil
â”‚   â”œâ”€â”€ recipes/
â”‚   â”‚   â”œâ”€â”€ index.php            # Liste recettes locales
â”‚   â”‚   â”œâ”€â”€ lire.php             # DÃ©tail recette locale
â”‚   â”‚   â”œâ”€â”€ ajouter.php          # Ajout recette
â”‚   â”‚   â””â”€â”€ edit.php             # Modification recette
â”‚   â”œâ”€â”€ favorites/
â”‚   â”‚   â””â”€â”€ index.php            # Liste favoris API
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ index.php            # Recherche API
â”‚   â”‚   â””â”€â”€ lire.php             # DÃ©tail recette API [NOUVEAU v1.0]
â”‚   â””â”€â”€ users/
â”‚       â”œâ”€â”€ login.php
â”‚       â”œâ”€â”€ register.php
â”‚       â””â”€â”€ profile.php

â”œâ”€â”€ database/
â”‚   â””â”€â”€ examenPhp.sql            # Structure BDD

â”œâ”€â”€ Autoloader.php                # PSR-4 autoloader
â”œâ”€â”€ README.md                     # Ce fichier
â””â”€â”€ RAPPORT_SOLUTION_API_LIRE.md  # Documentation technique
```

---

## ğŸ—„ï¸ Base de DonnÃ©es

### Tables Principales

#### `users`
- `id` (PK) - Identifiant unique
- `email` - Email de l'utilisateur
- `password` - Hash du mot de passe (bcrypt)
- `username` - Pseudonyme
- `created_at` - Date crÃ©ation

#### `recipes` (Recettes Locales)
- `id` (PK)
- `user_id` (FK â†’ users)
- `title` - Titre
- `description` - Description
- `ingredients` - JSON (format: `[{"name":"", "qty":""}]`)
- `instructions` - Instructions
- `image_url` - Chemin image
- `created_at`, `updated_at`

#### `favorites` (Recettes API)
- `id` (PK)
- `user_id` (FK â†’ users)
- `id_api` - ID TheMealDB
- `titre` - Titre recette
- `image_url` - URL image
- `note` - Notes personnelles (optionnel)
- `created_at`

---

## ğŸš€ Installation & Configuration

### PrÃ©requis
- PHP 7.4+
- MySQL 5.7+
- Composer (optionnel)
- Navigateur moderne (Chrome, Firefox, Safari, Edge)

### Ã‰tapes d'installation

1. **Cloner le projet**
   ```bash
   git clone <repo-url> examenPHP
   cd examenPHP
   ```

2. **CrÃ©er la base de donnÃ©es**
   ```bash
   mysql -u root -p < database/examenPhp.sql
   ```

3. **Configurer la connexion BD**
   - Ã‰diter `src/core/Db.php`
   - Adapter les identifiants MySQL

4. **Lancer le serveur local**
   ```bash
   php -S localhost:8000
   # AccÃ¨s: http://localhost:8000/public
   ```

5. **Tester**
   - S'inscrire: http://localhost:8000/public/?url=users/register
   - Se connecter: http://localhost:8000/public/?url=users/login
   - Accueil: http://localhost:8000/public/?url=main

---

## ğŸ” SÃ©curitÃ©

### Mesures ImplÃ©mentÃ©es

| Risque | PrÃ©vention |
|--------|-----------|
| **Injection SQL** | RequÃªtes prÃ©parÃ©es (PDO) |
| **XSS** | `htmlspecialchars()`, `strip_tags()` |
| **CSRF** | Token CSRF validÃ© sur tous les POST |
| **Brute Force** | Rate limiting (3 tentatives/5 min) |
| **Mots de passe** | Hashing bcrypt (`password_hash`) |
| **Upload fichiers** | Validation MIME + extension |
| **Session** | Secure flags, HttpOnly, SameSite |

### Headers de SÃ©curitÃ©
- `X-Frame-Options: DENY`
- `X-Content-Type-Options: nosniff`
- `Strict-Transport-Security`
- `Content-Security-Policy`

---

## ğŸ“± FonctionnalitÃ©s ClÃ©s v1.0

### [NOUVEAU] Affichage des Recettes API

**Avant v1.0:** Les favoris redirigent vers `https://www.themealdb.com/meal/{id}`

**Depuis v1.0:** Les favoris s'affichent dans l'application avec tous les dÃ©tails:
- ğŸ“– Page dÃ©diÃ©e: `/api/lireRecette/{id_api}`
- ğŸ–¼ï¸ Image de la recette (centrÃ©e et responsive)
- ğŸ“‹ Liste complÃ¨te des ingrÃ©dients
- ğŸ‘¨â€ğŸ³ Instructions de prÃ©paration
- ğŸ·ï¸ CatÃ©gorie et rÃ©gion
- ğŸ”— Liens vers source + TheMealDB
- âš¡ Cache en session (30 min)
- ğŸ›¡ï¸ Gestion d'erreurs robuste

**Fichiers modifiÃ©s:**
- `src/controllers/ApiController.php` - Nouvelle mÃ©thode `lireRecette()`
- `views/api/lire.php` - Nouvelle vue (crÃ©Ã©e)
- `views/favorites/index.php` - Lien interne (au lieu de themealdb.com)

### [AMÃ‰LIORÃ‰] Accueil

**AmÃ©lioration:**
- Section "Mes Coups de CÅ“ur": Max 6 recettes alÃ©atoires
- Ordre diffÃ©rent Ã  chaque rechargement
- Meilleure lisibilitÃ©

---

## ğŸ§ª Phase Test Utilisateur

### Statut Actuel
- âœ… **DÃ©veloppement:** TerminÃ©
- ğŸ§ª **Tests:** EN COURS (Phase 1)
- ğŸ“‹ **Feedback utilisateurs:** Ã€ collecter
- ğŸ”„ **Optimisations:** Ã€ faire selon retours

### Checklist Tests (RÃ©alisÃ©e)

- [x] Navigation de base
- [x] Affichage images/ingrÃ©dients/instructions
- [x] Badges catÃ©gorie/rÃ©gion
- [x] Bouton retour
- [x] Cache (performance)
- [x] MÃ©tadonnÃ©es et liens
- [x] Responsive mobile
- [x] Gestion erreurs API
- [x] ScÃ©nario utilisateur complet

### Prochaines Ã‰tapes (v1.1)

- [ ] Retours des utilisateurs
- [ ] Optimisations selon feedback
- [ ] Documentation utilisateur
- [ ] AmÃ©lioration commentaires JavaScript (JSDoc)
- [ ] Tests de charge
- [ ] SEO (sitemap, meta tags)

---

## ğŸ“Š Documentation Technique

DÃ©tails techniques complets disponibles dans:
- **`RAPPORT_SOLUTION_API_LIRE.md`** - Architecture v1.0 (affichage recettes API)

### Ã‰tat des Commentaires du Code

| Type | Status | DÃ©tail |
|------|--------|--------|
| PHP Controllers | âœ… 100% | Excellents, franÃ§ais |
| PHP Models | âœ… 100% | Excellents, franÃ§ais |
| PHP Vues | âœ… 100% | Bien documentÃ©es |
| JavaScript | âš ï¸ 71% | Ã€ amÃ©liorer (JSDoc) |
| **TOTAL** | **71%** | Couverture globale |

---

## ğŸ› ï¸ Technologies UtilisÃ©es

### Backend
- **PHP** 7.4+ - Langage serveur
- **MySQL** - Base de donnÃ©es
- **PDO** - ORM minimaliste
- **PSR-4** - Autoloading

### Frontend
- **HTML5** - Structure
- **CSS3** - Styles (personnalisÃ©s + Bootstrap 5)
- **JavaScript (ES6+)** - InteractivitÃ©
- **Bootstrap 5** - Framework CSS
- **Toastify** - Notifications

### APIs Externes
- **TheMealDB** - Source de recettes (https://www.themealdb.com/api.php)

### Outils
- **Git** - Versioning
- **Composer** (optionnel)

---

## ğŸ“ˆ Statistiques Projet

- **Fichiers PHP:** 14+ (Controllers, Models, Views)
- **Fichiers JavaScript:** 4+ modules
- **Templates Vue:** 12+
- **Lignes de code:** ~3500+
- **Couverture commentaires:** 71% du code
- **Base de donnÃ©es:** 3 tables + relations

---

## ğŸ“ Support & Contact

Pour des questions ou retours:
- ğŸ“§ Email: [Ã€ dÃ©finir]
- ğŸ’¬ Issues: [CrÃ©er une issue]
- ğŸ› Bug reports: [ProcÃ©dure Ã  dÃ©finir]

---

## ğŸ“„ Licence

Ã€ dÃ©finir (MIT, GPL, etc.)

---

## ğŸ“ CrÃ©dits

- **DÃ©veloppeur:** Warse
- **Date projet:** 2026
- **Version:** 1.0.0

---

## âœ… CHANGELOG v1.0.0

### Features
- âœ¨ Affichage complet des recettes API (au lieu de redirection)
- âœ¨ Cache en session 30 minutes
- âœ¨ RÃ©cupÃ©ration dynamique des ingrÃ©dients de l'API
- âœ¨ Gestion d'erreurs robuste (API down, timeout, JSON invalide)
- âœ¨ Max 6 recettes alÃ©atoires sur l'accueil

### Fixes
- ğŸ› Lien "Voir la recette" depuis favoris (interne au lieu d'externe)
- ğŸ› Suppression inutile de youtube_url du contrÃ´leur

### AmÃ©liorations
- âš¡ Performance amÃ©liorÃ©e avec cache session
- ğŸ¨ Layout optimisÃ© pour les recettes API
- ğŸ“± Responsive mobile amÃ©liorÃ©
- ğŸ›¡ï¸ SÃ©curitÃ© XSS sur toutes les donnÃ©es API

---

**Merci d'utiliser Marmiton-Exam! ğŸ³**

*Status: En test utilisateur - Version stable 1.0.0*
